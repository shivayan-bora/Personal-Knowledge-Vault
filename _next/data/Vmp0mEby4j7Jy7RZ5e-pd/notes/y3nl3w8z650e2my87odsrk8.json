{"pageProps":{"note":{"id":"y3nl3w8z650e2my87odsrk8","title":".mock Property","desc":"","updated":1658749382826,"created":1658746844920,"custom":{},"fname":"cs.webdev.frontend.language.js.testing.tools.jest.mock.mock-function.mock-prop","type":"note","vault":{"fsPath":"vault"},"contentHash":"81a33e80e4bb56ccd6fe807ba04a2f2e","links":[],"anchors":{},"children":[],"parent":"4lz8g2g6opi2fe0vh2abo3c","data":{}},"body":"<h1 id=\"mock-property\">.mock Property<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#mock-property\"></a></h1>\n<p>All mock functions have a <code>.mock</code> property which is where the data about how the function has been called, it's return values are stored.</p>\n<p>The <code>.mock</code> property also tracks the value of <code>this</code> for each call, so it's possible to inspect <code>this</code> as well.</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> myMock1 <span class=\"token operator\">=</span> jest<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> a <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">myMock1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>myMock1<span class=\"token punctuation\">.</span><span class=\"token property-access\">mock</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">instances</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// > [ &#x3C;a> ]</span>\n\n<span class=\"token keyword\">const</span> myMock2 <span class=\"token operator\">=</span> jest<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> b <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> bound <span class=\"token operator\">=</span> myMock2<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">bind</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">bound</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>myMock2<span class=\"token punctuation\">.</span><span class=\"token property-access\">mock</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">contexts</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// > [ &#x3C;b> ]</span>\n</code></pre>\n<p>The mock members are quite useful in tests to assert:</p>\n<ol>\n<li>How the functions get called?</li>\n<li>How the functions get instantiated?</li>\n<li>What they returned?</li>\n</ol>\n<p>e.g.</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// The function was called exactly once</span>\n<span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>someMockFunction<span class=\"token punctuation\">.</span><span class=\"token property-access\">mock</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">calls</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">length</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// The first arg of the first call to the function was 'first arg'</span>\n<span class=\"token comment\">// First parameter signifies the first call and the second parameter signifies the 1st argument in that call</span>\n<span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>someMockFunction<span class=\"token punctuation\">.</span><span class=\"token property-access\">mock</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">calls</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'first arg'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// The second arg of the first call to the function was 'second arg'</span>\n<span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>someMockFunction<span class=\"token punctuation\">.</span><span class=\"token property-access\">mock</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">calls</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'second arg'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// The return value of the first call to the function was 'return value'</span>\n<span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>someMockFunction<span class=\"token punctuation\">.</span><span class=\"token property-access\">mock</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">results</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">value</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'return value'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// The function was called with a certain `this` context: the `element` object.</span>\n<span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>someMockFunction<span class=\"token punctuation\">.</span><span class=\"token property-access\">mock</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">contexts</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">toBe</span><span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// This function was instantiated exactly twice</span>\n<span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>someMockFunction<span class=\"token punctuation\">.</span><span class=\"token property-access\">mock</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">instances</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">length</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// The object returned by the first instantiation of this function</span>\n<span class=\"token comment\">// had a `name` property whose value was set to 'test'</span>\n<span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>someMockFunction<span class=\"token punctuation\">.</span><span class=\"token property-access\">mock</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">instances</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">name</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">toEqual</span><span class=\"token punctuation\">(</span><span class=\"token string\">'test'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// The first argument of the last call to the function was 'test'</span>\n<span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>someMockFunction<span class=\"token punctuation\">.</span><span class=\"token property-access\">mock</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">lastCall</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'test'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>","noteIndex":{"id":"2rzu5qtc4erc8gkfiteeysj","title":"Root","desc":"","updated":1655457392891,"created":1652954242758,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault"},"contentHash":"9a2bd52692d036217559f962a88e54f2","links":[],"anchors":{"welcome-to-dendron":{"type":"header","text":"Welcome to Dendron","value":"welcome-to-dendron","line":7,"column":0,"depth":2},"lookup":{"type":"header","text":"Lookup","value":"lookup","line":11,"column":0,"depth":3}},"children":["nd2nkpjzc9hp9yhddsgf49w","djmknwf8xylsk3bwbyzgqwa","ygf9ydcqcmf3bdi4wyk3x58","2m3ygofcj8yajjevvh51ask","b9usa34mum3s56s60buxilt","witebak8d2ks87mmo9ofhui","wvvka5dtr8y49ssrhz0ja7d","moclflptspqmdjzdo2mo3x5","omuf127ul29qp4ebuvejtep"],"parent":null,"data":{},"body":"## Welcome to Dendron\n\nThis is the root of your dendron vault. If you decide to publish your entire vault, this will be your landing page. You are free to customize any part of this page except the frontmatter on top.\n\n### Lookup\n\nThis section contains useful links to related resources.\n\n- [Getting Started Guide](https://link.dendron.so/6b25)\n- [Discord](https://link.dendron.so/6b23)\n- [Home Page](https://wiki.dendron.so/)\n- [Github](https://link.dendron.so/6b24)\n- [Developer Docs](https://docs.dendron.so/)\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNote":{"initialValue":"templates"},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":"vault"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"task","dateFormat":"y.MM.dd","addBehavior":"asOwnDomain","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link","taskCompleteStatus":["done","x"]},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":true,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"enableFullHierarchyNoteTitle":false,"enableSmartRefs":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"Dendron","description":"Personal Knowledge Space"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enablePrettyLinks":true,"duplicateNoteBehavior":{"action":"useVault","payload":["vault"]},"enableTaskNotes":true,"siteUrl":"https://shivayan-bora.github.io","assetsPrefix":"/Personal-Knowledge-Vault","siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true}